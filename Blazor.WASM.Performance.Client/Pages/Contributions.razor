@page "/Contributions"
@page "/Contributions/{mode}"

<MudAppBar>
    <MudText Typo="Typo.h4">
        Blazor WebAssembly Performance
    </MudText>
    <MudSpacer />
    <MudToggleIconButton @bind-Toggled="_showGridView" Icon="@Icons.Material.Filled.ViewList" ToggledIcon="@Icons.Material.Filled.GridView" Color="Color.Surface"></MudToggleIconButton>
</MudAppBar>

<div class="container" style="padding: 1rem;">
    @if (_showGridView)
    {
        <div>
            <QuickGrid ItemsProvider="_contributionsProvider" Virtualize="true" Pagination="pagination">
                <PropertyColumn Title="Titel" Property="@(c => c.Title)" Sortable="true" />
                <PropertyColumn Title="Datum" Property="@(c => c.Date)" Format="yyyy-MM-dd" Sortable="true" />
                <PropertyColumn Title="Sprache" Property="@(c => c.Language)" />
                <PropertyColumn Title="PrimaryTag" Property="@(c => c.PrimaryTag)" Sortable="true" />
            </QuickGrid>
        </div>
        <div class="page-buttons">
            Page:
            @if (pagination.TotalItemCount.HasValue)
            {
                for (var pageIndex = 0; pageIndex <= pagination.LastPageIndex; pageIndex++)
                {
                    var capturedIndex = pageIndex;
                    <button @onclick="@(() => GoToPageAsync(capturedIndex))"
                            class="@PageButtonClass(capturedIndex)"
                            aria-current="@AriaCurrentValue(capturedIndex)"
                            aria-label="Go to page @(pageIndex + 1)">
                        @(pageIndex + 1)
                    </button>
                }
            }
        </div>
        <p>Todo</p>
    }
    else
    {
        <div class="container">
            <Virtualize Context="contribution" ItemsProvider="@LoadContributions" SpacerElement="p">
                <ItemContent>
                    <ContributionCard Contribution="@contribution"></ContributionCard>
                </ItemContent>
                <Placeholder>
                    <PlaceholderCard></PlaceholderCard>
                </Placeholder>
            </Virtualize>
        </div>
        <div class="action">
            <MudButton OnClick="Clicked"
                   Target="_blank"
                   Variant="Variant.Filled"
                   EndIcon="@Icons.Material.Filled.Edit"
                   Color="Color.Secondary">
                Click me....
            </MudButton>
        </div>
    }
</div>